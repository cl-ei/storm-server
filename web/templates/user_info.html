<html>
<head>
    <meta name="referrer" content="same-origin">
    <style>
    table{
        width: 100%;
        max-width: 1100px;
        margin-bottom: 20px;
        border: 1px solid #7a7a7a;
        border-collapse: collapse;
        border-left: none;
        word-break: normal;
        line-height: 30px;
        text-align: center;
    }
    tr, th, td{
        border: 1px solid #7a7a7a;
    }
    .medal{
        color: white;
        border-radius: 2px;
        padding: 2px 2px 2px 4px;
    }
    .medal-text{
        background-color: white;
    }
    </style>
</head>
<body>
    <h2>{{ user_name }}</h2>
    <p>最后更新时间：{{ last_update }}</p>
    <table>
    <tr><th>用户名</th> <td>{{ user_name }}</td></tr>
    <tr><th>用户id</th> <td>{{ uid }}</td></tr>

    <tr><th>粉丝数</th> <td>{{ attention }}</td></tr>
    <tr><th>直播间标题</th> <td>{{ title }}</td></tr>
    <tr><th>直播间短号</th> <td>{{ short_room_id }}</td></tr>
    <tr><th>原始直播间号</th> <td>{{ real_room_id }}</td></tr>
    <tr><th>注册时间</th> <td>{{ create_at }}</td></tr>
    <tr><th>曾用名</th> <td>{{ used_names }}</td></tr>
    </table>
    <h2>在45天内赠送的礼物：(共{{ guards_info|length }}个)</h2>
    <table>
    <tr>
        <th>房间号</th>
        <th>主播</th>
        <th>礼物名称</th>
        <th>数量</th>
        <th>开通时间</th>
    </tr>
    {% for g in guards_info %}
    <tr>
        {% if g.room_id %}
        <td rowspan="{{ g.rowspan }}"><a href="https://live.bilibili.com/{{ g.room_id }}" target="_blank">{{ g.room_id }}</a></td>
        <td rowspan="{{ g.rowspan }}">{{ g.master_name }}</td>
        {% endif %}
        <td>{{ g.gift_name }}</td>
        <td>{{ g.count }}</td>
        <td>{{ g.interval_prompt }}</td>
    </tr>
    {% endfor %}
    </table>

    {% if medal_flag %}
        <h2>拥有勋章：（共{{ medal_info|length }}个）</h2>
        <table>
        <tr>
            <th>勋章</th>
            <th>主播</th>
            <th>亲密度</th>
            <th>开通时间</th>
        </tr>
        {% for m in medal_info %}
        <tr>
            <td><span class="medal" style="background-color: {{ "%X" % m.color }}">
                <span class="medal-text">{{ m.medal_name }}</span>
                <span class="medal-level" style="color: {{ "%X" % m.color }}">{{ m.level }}</span>
            </span></td>
            <td>{{ m.uname }}</td>
            <td>{{ m.intimacy }}</td>
            <td>{{ m.receive_time }}</td>
        </tr>
        {% endfor %}
        </table>
    {% else %}
    <h2>用户勋章获取失败：{{ medal_info }}</h2>
    {% endif %}

</body>
</html>